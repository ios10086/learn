(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{374:function(t,s,a){"use strict";a.r(s);var n=a(45),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"pipeline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pipeline"}},[t._v("#")]),t._v(" PipeLine")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("def url\ndef updateDescription\n\npipeline "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    agent any\n    parameters "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        gitParameter branchFilter: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/(.*)'")]),t._v(", defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SHELL_BRANCH'")]),t._v(", type:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PT_BRANCH_TAG'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'移动框架分支选择'")]),t._v(",\n                    useRepository:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:isupplant_ios/isupplant.git'")]),t._v("\n        gitParameter branchFilter: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/(.*)'")]),t._v(", defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YH_BRANCH'")]),t._v(", type:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PT_BRANCH_TAG'")]),t._v(", sortMode:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DESCENDING_SMART'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'隐患分支选择，invalid代表不包含'")]),t._v(",\n                    useRepository:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:huchenming/sphazard.git'")]),t._v("\n        gitParameter branchFilter: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/(.*)'")]),t._v(", defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SES_OTHER_BRANCH'")]),t._v(", type:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PT_BRANCH_TAG'")]),t._v(", sortMode:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DESCENDING_SMART'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'安全分支选择，模块包括安全检查、安全制单，invalid代表不包含'")]),t._v(",\n                    useRepository:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:huchenming/spsecuritycheck.git'")]),t._v("  \n        gitParameter branchFilter: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/(.*)'")]),t._v(", defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EAM_BRANCH'")]),t._v(", type:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PT_BRANCH_TAG'")]),t._v(", sortMode:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DESCENDING_SMART'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'设备分支选择，模块包括维修工单、设备档案、备件管理、预警，invalid代表不包含'")]),t._v(",\n                    useRepository:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:zhaomenglei/eambranch.git'")]),t._v(" \n        gitParameter branchFilter: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/(.*)'")]),t._v(", defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WTS_BRANCH'")]),t._v(", type:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PT_BRANCH_TAG'")]),t._v(", sortMode:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DESCENDING_SMART'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'作业票分支选择，invalid代表不包含'")]),t._v(",\n                    useRepository:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:zhaomenglei/wtsbranch.git'")]),t._v("    \n        string defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'isupPlant'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'APP名称'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DISPLAY_NAME'")]),t._v("\n        string defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6.0.0.0'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'编译版本'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BUILD_VERSION'")]),t._v("\n        string defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"supPlant-isupPlant V6.0.0.0-210107-C(iOS)\"'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'打包包名,名称必须包含双引号'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'RELEASE_FILE_NAME'")]),t._v("\n                choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("choices: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'enterprise'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app-store'")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ad-hoc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'分发渠道'")]),t._v(" , name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'METHOD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        string defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.supcon.mobile.iSupPlant'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'唯一标识符'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'APPLICATION_ID'")]),t._v("\n        string "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'UPDATE_DESCRIPTION'")]),t._v(", defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'更新说明'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        string "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'RELEASE_BASE_URL'")]),t._v(", defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://192.168.90.192:30215'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'发布平台地址'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        string defaultValue: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'huchenming@supcon.com'")]),t._v(", description: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'邮件提醒地址，多人分号以隔开'")]),t._v(", name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EMAIL_ADDRESSES'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    stages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'移动框架'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                checkout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$class")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GitSCM'")]),t._v(", \n                    branches: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.SHELL_BRANCH}")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                    doGenerateSubmoduleConfigurations: false, \n                    extensions: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                    gitTool: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Default'")]),t._v(", \n                    submoduleCfg: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                    userRemoteConfigs: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:isupplant_ios/isupplant.git'")]),t._v(", credentialsId: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b0abf313-e643-41f8-9b69-5c84e883520c'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git reset --hard'")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'隐患'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            when "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n                expression "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n                    dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Users/mac/.jenkins/workspace/iOS/ISupPlant/hlEAM/SPlantSection/BusinessSection/SPHazard'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        checkout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$class")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GitSCM'")]),t._v(", \n                            branches: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.YH_BRANCH}")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            doGenerateSubmoduleConfigurations: false, \n                            extensions: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            gitTool: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Default'")]),t._v(", \n                            submoduleCfg: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            userRemoteConfigs: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:huchenming/sphazard.git'")]),t._v(", credentialsId: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b0abf313-e643-41f8-9b69-5c84e883520c'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" params.YH_BRANCH "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"invalid"')]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            steps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ruby "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v('/DeleteFileScript.rb "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v("/ISupPlant/hlEAM/SPlantSection/BusinessSection/SPHazard\"'")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'安全（除隐患）'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            when "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n                expression "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n                    dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Users/mac/.jenkins/workspace/iOS/ISupPlant/hlEAM/SPlantSection/BusinessSection/SPSESOther'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        checkout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$class")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GitSCM'")]),t._v(", \n                            branches: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.SES_OTHER_BRANCH}")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            doGenerateSubmoduleConfigurations: false, \n                            extensions: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            gitTool: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Default'")]),t._v(", \n                            submoduleCfg: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            userRemoteConfigs: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:huchenming/spsecuritycheck.git'")]),t._v(", credentialsId: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b0abf313-e643-41f8-9b69-5c84e883520c'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" params.SES_OTHER_BRANCH "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"invalid"')]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            steps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ruby "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v('/DeleteFileScript.rb "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v("/ISupPlant/hlEAM/SPlantSection/BusinessSection/SPSESOther\"'")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'设备'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            when "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n                expression "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Users/mac/.jenkins/workspace/iOS/ISupPlant/hlEAM/MobileProject/Modules/eamBranch'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        checkout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$class")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GitSCM'")]),t._v(", \n                            branches: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.EAM_BRANCH}")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            doGenerateSubmoduleConfigurations: false, \n                            extensions: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            gitTool: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Default'")]),t._v(", \n                            submoduleCfg: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            userRemoteConfigs: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:zhaomenglei/eambranch.git'")]),t._v(", credentialsId: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b0abf313-e643-41f8-9b69-5c84e883520c'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" params.EAM_BRANCH "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"invalid"')]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            steps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ruby "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v('/DeleteFileScript.rb "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v("/ISupPlant/hlEAM/MobileProject/Modules/eamBranch\"'")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'作业'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            when "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n                expression "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Users/mac/.jenkins/workspace/iOS/ISupPlant/hlEAM/MobileProject/Modules/wtsBranch'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        checkout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$class")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GitSCM'")]),t._v(", \n                            branches: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.WTS_BRANCH}")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            doGenerateSubmoduleConfigurations: false, \n                            extensions: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            gitTool: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Default'")]),t._v(", \n                            submoduleCfg: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", \n                            userRemoteConfigs: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@192.168.95.31:zhaomenglei/wtsbranch.git'")]),t._v(", credentialsId: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b0abf313-e643-41f8-9b69-5c84e883520c'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" params.WTS_BRANCH "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"invalid"')]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            steps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ruby "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v('/DeleteFileScript.rb "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v("/ISupPlant/hlEAM/MobileProject/Modules/wtsBranch\"'")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Pod Install'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cd '),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v('/ISupPlant && pod install --no-repo-update"')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Build'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            stages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Archive'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    steps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$WORKSPACE")]),t._v("/AutoPackageScript.sh -a "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.METHOD}")]),t._v(" -b "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.APPLICATION_ID}")]),t._v(" -c "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.DISPLAY_NAME}")]),t._v(" -d "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.BUILD_VERSION}")]),t._v(" -e "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.RELEASE_FILE_NAME}")]),t._v(" -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.RELEASE_BASE_URL}")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${env.BUILD_NUMBER}")]),t._v(" -h "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.SHELL_BRANCH}")]),t._v(" -i "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.YH_BRANCH}")]),t._v(" -j "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.SES_OTHER_BRANCH}")]),t._v(" -k "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.EAM_BRANCH}")]),t._v(" -m "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.WTS_BRANCH}")]),t._v('"')]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                \n                stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Read'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    steps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        script "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                            def props "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" readJSON file: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url.json'")]),t._v("\n                            "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                            "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("updateDescription")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'updateDescription'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("                    \n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            \n            post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t\t\tsuccess "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     \t\t\t\temailext "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n     \t\t\t\t\tsubject: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"发布成功"')]),t._v(",\n     \t\t\t\t\tbody: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v('"发布成功 '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("n\n     \t\t\t\t\t\t\t下载地址："),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${url}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("n\n     \t\t\t\t\t\t\t更新说明："),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${updateDescription}")]),t._v("\n     \t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v('",\n     \t\t\t\t\tto: '),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${EMAIL_ADDRESSES}")]),t._v('"')]),t._v(",\n     \t\t\t\t\tfrom: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"huchenming@supcon.com"')]),t._v("\n     \t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Compile'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            steps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                archiveArtifacts artifacts: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Package/**/*.ipa'")]),t._v(", followSymlinks: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    post "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        success "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Build failed'")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        failure "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            script "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"curl -X PUT -H 'Content-Type: application/json' -d '{"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("buildNumber"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${env.BUILD_NUMBER}")]),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("jobName"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${env.JOB_NAME}")]),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("}' "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${params.RELEASE_BASE_URL}")]),t._v('/inter-api/mobile-platform/v1/appVersion/callback"')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-ruby extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ruby"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xcodeproj'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'json'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'find'")]),t._v("\n\nproject_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Users/mac/.jenkins/workspace/iOS/ISupPlant/hlEAM.xcodeproj'")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 工程路径")]),t._v("\nproject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Xcodeproj")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Project")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("open"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("project_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ngroup_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ARGV")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#group_path = '/Users/mac/.jenkins/workspace/iOS/ISupPlant/hlEAM/SPlantSection/BusinessSection/SPHazard'  #group路径")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("process_group_remove_path")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aTarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" aGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    puts "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\nprocess_group_remove_path..."')]),t._v("\n\n    aGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n        aTarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resources_build_phase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove_file_reference"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n    aGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("groups"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("group"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n        process_group_remove_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aTarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token method-definition"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deletePackage")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("package_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    target "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("targets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first\n    arr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#通过find找到该物理路径下所有的文件结构地址")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("package_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("end_with"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".m"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".mm"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".h"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".plist"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".xib"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".storyboard"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#将物理路径转成 项目的group路径，删除path 前面不相干的路径，再拼接项目名称 ，44长度要视实际情况")]),t._v("\n            path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("44")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("44")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            puts path\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#按照 group路径最长的加到arr数组最后面逻辑处理。")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n                arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n                        arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#对数组进行反转，最深的路径在最前面")]),t._v("\n    arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reverse\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#将arr里面所有的路径进行删除资源以及引用")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n        removeGroup "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main_group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_subpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        removeGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_source_tree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<group>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("removeGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("empty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n            process_group_remove_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" removeGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            removeGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clear"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\ndeletePackage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("group_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nproject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save\n\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);